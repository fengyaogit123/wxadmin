webpackJsonp([2],{JWlw:function(e,r){},jT7l:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("Xxa5"),o=s.n(t),a=s("exGp"),n=s.n(a),i=s("0jG4"),c=s("oAV5").a.storage,m={name:"Login",data:function(){return{loading:!1,remember:!0,code:"/api/login/checkcode",forms:{phone:"",password:"",img:""},rules:{phone:{required:!0,message:"The phone cannot be empty",trigger:"blur"},password:{required:!0,message:"The password cannot be empty",trigger:"blur"},img:{required:!0,message:"The checkcode cannot be empty",trigger:"blur"}}}},created:function(){this.initPwdLocal()},methods:{resetCode:function(){this.code=this.code+"?t="+ +new Date,this.forms.img=""},submit:function(){var e=this;return n()(o.a.mark(function r(){var s,t;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.forms.validate();case 2:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:return e.loading=!0,r.prev=6,r.next=9,i.b.login(e.$QS.stringify(e.forms));case 9:if(s=r.sent,(t=s.data).isAdmin){r.next=13;break}return r.abrupt("return",e.$Message.info("您没有权限!"));case 13:e.loading=!1,e.$Message.success("登录成功"),e.pwdlocal(),e.$store.commit("users/users",t),e.$router.replace({name:"User"}),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(6),e.loading=!1,e.resetCode();case 24:case"end":return r.stop()}},r,e,[[6,20]])}))()},pwdlocal:function(){this.remember?(c.setLocal("password",this.forms.password),c.setLocal("phone",this.forms.phone)):(c.setLocal("password",""),c.setLocal("phone",""))},initPwdLocal:function(){this.remember&&(this.forms.password=(c.getLocal("password")||"")+"",this.forms.phone=(c.getLocal("phone")||"")+"")}}},l={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"login-mask"}),e._v(" "),s("div",{staticClass:"form-wrap"},[e._m(0),e._v(" "),s("Form",{ref:"forms",attrs:{model:e.forms,rules:e.rules}},[s("FormItem",{attrs:{prop:"phone"}},[s("Input",{attrs:{size:"large",placeholder:"请输入手机号"},model:{value:e.forms.phone,callback:function(r){e.$set(e.forms,"phone","string"==typeof r?r.trim():r)},expression:"forms.phone"}})],1),e._v(" "),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",size:"large",placeholder:"请输入密码"},model:{value:e.forms.password,callback:function(r){e.$set(e.forms,"password","string"==typeof r?r.trim():r)},expression:"forms.password"}})],1),e._v(" "),s("FormItem",{staticClass:"form-margin",attrs:{prop:"img"}},[s("div",{staticClass:"form-code"},[s("Input",{attrs:{size:"large",placeholder:"请输入验证码"},model:{value:e.forms.img,callback:function(r){e.$set(e.forms,"img","string"==typeof r?r.trim():r)},expression:"forms.img"}}),e._v(" "),s("img",{staticClass:"checkcode",attrs:{width:"100",height:"40",src:e.code,alt:"验证码"},on:{click:e.resetCode}})],1)]),e._v(" "),s("FormItem",{staticClass:"form-margin"},[s("Checkbox",{attrs:{size:"large"},model:{value:e.remember,callback:function(r){e.remember=r},expression:"remember"}},[e._v("\n                    记住密码\n                ")])],1),e._v(" "),s("FormItem",{staticClass:"form-margin"},[s("Button",{attrs:{loading:e.loading,size:"large",long:"",type:"primary"},on:{click:e.submit}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("p",[r("span",[this._v("Admin Login")])])}]};var p=s("VU/8")(m,l,!1,function(e){s("JWlw")},null,null);r.default=p.exports}});